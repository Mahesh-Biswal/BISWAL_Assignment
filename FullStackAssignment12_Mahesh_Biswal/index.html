<!-- jquery-app/index.html -->
<!DOCTYPE html>
<html>

<head>
    <title>Microservices jQuery App</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<style>
    body {
        background-color: bisque;
    }
    h1 {
        color: black;
        text-align: center;
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
    }
</style>
<body>
    <h1>Departments</h1>
    <ul id="departments-list"></ul>
    <h1>Employees</h1>
    <ul id="employees-list"></ul>
    <script>
        $(document).ready(() => {
            // Function to fetch departments and display them
            function loadDepartments() {
                $.ajax({
                    url: 'http://localhost:8001/api/deps',
                    method: 'GET',
                    dataType: 'json',
                    success: (data) => {
                        $('#departments-list').empty();
                        data.data.forEach((department) => {
                            $('#departments-list').append(`<li>Department: (${department.DeptName})</li>`);
                        });
                    },
                    error: (error) => {

                    }
                });
            }

            // Function to fetch employees and display them
            function loadEmployees() {
                $.ajax({
                    url: 'http://localhost:9001/api/emps',
                    method: 'GET',
                    dataType: 'json',
                    success: (data) => {
                        $('#employees-list').empty();
                        for (employee of data.data) {
                            $('#employees-list').append(`<li>Employee: (${employee.EmpName})</li>`);
                        };
                    },
                    error: (error) => {

                    }
                });
            }

            // Initial load of departments and employees
            loadDepartments();
            loadEmployees();
        });
    </script>
</body>

</html>